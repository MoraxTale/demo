<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.image.Image?>


<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.demo.Controller"
            stylesheets="@style.css"
            style="-fx-background-image: url('file:///E:/JAVA%20FX/demo/pic/main.png'); -fx-background-size: cover;">

    <top>
        <HBox styleClass="transparent-pane" alignment="CENTER_LEFT">
            <!-- 数值显示区域 -->
            <HBox spacing="30" alignment="CENTER_LEFT" style="-fx-padding: 10;">
                <Label fx:id="lblStage" styleClass="status-label"/>
                <Label fx:id="lblQi" styleClass="status-label"/>
                <Label fx:id="lblQiRate" styleClass="status-label"/>
                <Label fx:id="lblSuccessRate" styleClass="status-label"/>
            </HBox>

            <!-- 右侧菜单栏 -->
            <Region HBox.hgrow="ALWAYS"/>
            <MenuBar>
                <Menu text="游戏" styleClass="right-menu">
                    <MenuItem text="保存" onAction="#handleSave"/>
                    <MenuItem text="加载" onAction="#handleLoad"/>
                </Menu>
                <Menu text="帮助" styleClass="right-menu">
                    <MenuItem text="关于"/>
                </Menu>
            </MenuBar>
        </HBox>
    </top>

    <!-- 修改后的 bottom 区域 -->
    <bottom>
        <HBox alignment="CENTER" spacing="40" style="-fx-padding: 30;">
            <!-- 左侧按钮组 -->
            <HBox alignment="CENTER_RIGHT" spacing="15">
                <Button styleClass="rect-btn" onAction="#openTreasureShop">
                    <graphic>
                        <ImageView fitWidth="80" fitHeight="80" preserveRatio="true" pickOnBounds="true">
                            <image>
                                <Image url="file:E:/JAVA%20FX/demo/pic/pill.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button styleClass="rect-btn" fx:id="btnAlchemy">
                    <graphic>
                        <ImageView fitWidth="80" fitHeight="80" preserveRatio="true" pickOnBounds="true">
                            <image>
                                <Image url="file:E:/JAVA%20FX/demo/pic/pill.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
            </HBox> <!-- 确保闭合左侧 HBox -->

            <!-- 中央修炼按钮 -->
            <Button styleClass="circle-btn" fx:id="btnCultivate">
                <graphic>
                    <ImageView fitWidth="100" fitHeight="100" preserveRatio="true" pickOnBounds="true">
                        <image>
                            <Image url="file:E:/JAVA%20FX/demo/pic/pill.png" />
                        </image>
                    </ImageView>
                </graphic>
            </Button>

            <!-- 右侧按钮组 -->
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Button styleClass="rect-btn" onAction="#handleAdventureButton" fx:id="adventureBtn">
                    <graphic>
                        <ImageView fitWidth="80" fitHeight="80" preserveRatio="true" pickOnBounds="true">
                            <image>
                                <Image url="file:E:/JAVA%20FX/demo/pic/pill.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Button styleClass="rect-btn-red" fx:id="btnBreakthrough" onAction="#breakthrough">
                    <graphic>
                        <ImageView fitWidth="80" fitHeight="80" preserveRatio="true" pickOnBounds="true">
                            <image>
                                <Image url="file:E:/JAVA%20FX/demo/pic/pill.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
            </HBox> <!-- 确保闭合右侧 HBox -->
        </HBox> <!-- 闭合最外层 HBox -->
    </bottom>
    <!-- 在BorderPane中添加 -->
    <center>
        <StackPane fx:id="animationContainer" style="-fx-background-color: transparent;">
            <!-- 主角动画层 -->
            <ImageView fx:id="character" fitWidth="150" fitHeight="150" preserveRatio="true"/>
            <Pane fx:id="effectLayer" style="-fx-background-color: transparent;"/>

            <!-- 新增弹幕容器 -->
            <Pane fx:id="danmakuContainer" style="-fx-background-color: transparent;"/>
        </StackPane>
    </center>
</BorderPane>
